- name: Add Guake repository
  become: true
  ansible.builtin.apt_repository:
    repo: ppa:linuxuprising/guake
    state: present
  tags:
    - install
    - apps
    - ubuntu

- name: Update repositories cache and install Guake
  become: true
  ansible.builtin.apt:
    name: guake
    update_cache: yes
  tags:
    - install
    - apps
    - ubuntu

- name: Restore guake prefs
  ansible.builtin.shell: guake --restore-preferences $HOME/.config/guake/prefs.guake
  tags:
    - install
    - apps
    - ubuntu

# https://albertlauncher.github.io/installation/
# Ubuntu 22.04
- name: Install Albert launcher
  become: true
  ansible.builtin.apt:
    deb: https://download.opensuse.org/repositories/home:/manuelschneid3r/xUbuntu_22.04/amd64/albert_0.26.4-0+649.1_amd64.deb 
  tags:
    - install
    - apps
    - ubuntu
    - albert

- name: Install Google Chrome
  become: true
  ansible.builtin.apt:
    deb: https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
  tags:
    - install
    - apps
    - ubuntu
    - chrome

# Install Flatpak and DejaDup for Backups.
# https://apps.gnome.org/DejaDup/
# Backing up Calibre library.
- name: Install flatpak
  become: true
  ansible.builtin.apt:
    name: flatpak
  tags:
    - install
    - apps
    - ubuntu
    - dejadup

- name: Add flathub repository
  ansible.builtin.shell: flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo
  tags:
    - install
    - apps
    - ubuntu
    - dejadup

- name: Install DejaDup
  ansible.builtin.shell: flatpak install flathub org.gnome.DejaDup -y
  tags:
    - install
    - apps
    - ubuntu
    - dejadup

- name: Install Calibre dependencies
  become: true
  ansible.builtin.apt:
    name: libxcb-cursor0
  tags:
    - install
    - apps
    - ubuntu
    - calibre

# https://manual.calibre-ebook.com/faq.html#how-do-i-move-my-calibre-data-from-one-computer-to-another
# After installation, simply load backup with DejaDup
# and import the config from CalibreBackup directory.
- name: Install Calibre
  become: true
  ansible.builtin.shell: wget -nv -O- https://download.calibre-ebook.com/linux-installer.sh | sudo sh /dev/stdin
  tags:
    - install
    - apps
    - ubuntu
    - calibre
